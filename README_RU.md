# Документация API для обновления данных сервера в мониторинге GS4u

##### Ссылка: https://supd.gs4u.net/
Команды надо отправлять в переменой "cmd", пример: https://supd.gs4u.net/?cmd=getVersion

#### Доступны следующие команды:
* "**getCoolDown**" - даёт время в секундах, как часто можно слать информацию о сервере. 
То есть между отправками информации должно проходить именно столько секунд.
* "**getVersion**" - выдаёт актуальную версию плагина, которую рекомендуется использовать.

Без команды нужно отправлять данные о сервере подписанные токеном.
* В переменной "**data**" отправляются данные сервера в формате JSON.
* В переменной "**s**" отправляется подпись/хеш данных с токеном.
* ОПЦИОНАЛЬНО "**hash**" для использования другого метода хеширования.

## Создание хеша (подписи / сигнатуры)
В мониторинге для своего сервера вы можете сгенерировать токен. 
Он нужен для того чтобы создавать подпись.
Подпись строится следующим образом: ```md5(**data** + токен)```
то есть создаётся хеш MD5 из строики, которая включает в себя данные и токен.
###### Например
если ```data = 'ABC'```, а ```token = '123''```, то хеш равен ```s = md5('ABC123')```

#### Альтернатива MD5
Если MD5 вам по какой то причине не подходит вы можете передать так же перменную **hash** и указать способ хеширования.
На данный момент поддерживаются следующие методы хеширования:
* md5
* sha1

### ФОРМАТ данных сервера JSON:
```json
{
 "n":"Название сервера",
 "m":"Карта",
 "pc":"Количество играющих сейчас игроков",
 "pm":"Количество слотов для игроков",
 "e":{
  "password":"1 если для входа на сервер нужен пароль, 0 если нет",
  "game":"кодовое название игры, для CS:GO это 'csgo'",
  ... можно другие дополнительные данные о сервере...
 },
 "tabs":
 [
  {
   "name":"Name for Tab 1",
   "data":[
    {
     "name":"Name for Group 1",
     "data":[
      {
       "name":"Name for Item 1",
       "description":"Description for Item 1"
      },
      {
       "name":"Name for Item 2",
       "description":"Description for Item 2"
      },
     ]
    },
    {
     "name":"Name for Group 2",
     "data":[
      {
       "name":"Name for Item 3",
       "description":"Description for Item 3"
      }
     ]
    }
   ]
  },
  {
   "name":"Name for Tab 2",
   "data":[
    {
     "name":"Name for Group 1",
     "data":[
      {
       "name":"Name for Item 1",
       "description":"Description for Item 1"
      }
     ]
    }
   ]
  }
 ],
 "p":
 [
  {
   "name":"Ник игрока",
   "kills":"количество фрагов",
   "deaths":"количество смертей",
   "time":"как долго игрок уже на сервере",
   "team":"номер команды",
   "lvl": "уровень игрока",
   ...можно другие данные ещё...
  },
  {...другой игрок...}
 ]
}
```

# ОШИБКИ:
0 - нет ошибок

-1000 - Токен для вашего сервера не создан.

-2001 - Токен создан, но по какой то причине пуст. Обратитесь в службу поддержки.

-2002 - Токен не оплачен.

-2003 - Проверка дигитальной подписи не пройдена, вы используете неверный токен?

-3000 - Вы шлёте слишком много запросов.

-3001 - Вы отправили неизвестную команду в "cmd".

-7002 - вы прислали данные в JSON формате с неверным синтаксисом.

-1011 - в данных не был найден ServerID

-1001 - не прислано либо "data" либо "s"
